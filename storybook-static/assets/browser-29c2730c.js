import{a as ht,c as bt}from"./_commonjsHelpers-042e6b4d.js";import{s as S}from"./index-d475d2ea.js";import{a as mt}from"./index-890dd1b5.js";var lt=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),i=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;t[e]=r;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var y=Object.getOwnPropertySymbols(t);if(y.length!==1||y[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,e);if(o.value!==r||o.enumerable!==!0)return!1}return!0},X=typeof Symbol<"u"&&Symbol,St=lt,At=function(){return typeof X!="function"||typeof Symbol!="function"||typeof X("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:St()},Q={foo:{}},_t=Object,vt=function(){return{__proto__:Q}.foo===Q.foo&&!({__proto__:null}instanceof _t)},Ot="Function.prototype.bind called on incompatible ",$=Array.prototype.slice,Et=Object.prototype.toString,Pt="[object Function]",wt=function(t){var e=this;if(typeof e!="function"||Et.call(e)!==Pt)throw new TypeError(Ot+e);for(var i=$.call(arguments,1),r,y=function(){if(this instanceof r){var l=e.apply(this,i.concat($.call(arguments)));return Object(l)===l?l:this}else return e.apply(t,i.concat($.call(arguments)))},o=Math.max(0,e.length-i.length),s=[],a=0;a<o;a++)s.push("$"+a);if(r=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(y),e.prototype){var p=function(){};p.prototype=e.prototype,r.prototype=new p,p.prototype=null}return r},It=wt,q=Function.prototype.bind||It,Rt=q,Tt=Rt.call(Function.call,Object.prototype.hasOwnProperty),g,I=SyntaxError,ct=Function,w=TypeError,D=function(n){try{return ct('"use strict"; return ('+n+").constructor;")()}catch{}},_=Object.getOwnPropertyDescriptor;if(_)try{_({},"")}catch{_=null}var k=function(){throw new w},jt=_?function(){try{return arguments.callee,k}catch{try{return _(arguments,"callee").get}catch{return k}}}():k,O=At(),Bt=vt(),b=Object.getPrototypeOf||(Bt?function(n){return n.__proto__}:null),E={},Nt=typeof Uint8Array>"u"||!b?g:b(Uint8Array),v={"%AggregateError%":typeof AggregateError>"u"?g:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?g:ArrayBuffer,"%ArrayIteratorPrototype%":O&&b?b([][Symbol.iterator]()):g,"%AsyncFromSyncIteratorPrototype%":g,"%AsyncFunction%":E,"%AsyncGenerator%":E,"%AsyncGeneratorFunction%":E,"%AsyncIteratorPrototype%":E,"%Atomics%":typeof Atomics>"u"?g:Atomics,"%BigInt%":typeof BigInt>"u"?g:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?g:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?g:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?g:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?g:Float32Array,"%Float64Array%":typeof Float64Array>"u"?g:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?g:FinalizationRegistry,"%Function%":ct,"%GeneratorFunction%":E,"%Int8Array%":typeof Int8Array>"u"?g:Int8Array,"%Int16Array%":typeof Int16Array>"u"?g:Int16Array,"%Int32Array%":typeof Int32Array>"u"?g:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":O&&b?b(b([][Symbol.iterator]())):g,"%JSON%":typeof JSON=="object"?JSON:g,"%Map%":typeof Map>"u"?g:Map,"%MapIteratorPrototype%":typeof Map>"u"||!O||!b?g:b(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?g:Promise,"%Proxy%":typeof Proxy>"u"?g:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?g:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?g:Set,"%SetIteratorPrototype%":typeof Set>"u"||!O||!b?g:b(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?g:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":O&&b?b(""[Symbol.iterator]()):g,"%Symbol%":O?Symbol:g,"%SyntaxError%":I,"%ThrowTypeError%":jt,"%TypedArray%":Nt,"%TypeError%":w,"%Uint8Array%":typeof Uint8Array>"u"?g:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?g:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?g:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?g:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?g:WeakMap,"%WeakRef%":typeof WeakRef>"u"?g:WeakRef,"%WeakSet%":typeof WeakSet>"u"?g:WeakSet};if(b)try{null.error}catch(n){var Ct=b(b(n));v["%Error.prototype%"]=Ct}var Ut=function n(t){var e;if(t==="%AsyncFunction%")e=D("async function () {}");else if(t==="%GeneratorFunction%")e=D("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=D("async function* () {}");else if(t==="%AsyncGenerator%"){var i=n("%AsyncGeneratorFunction%");i&&(e=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var r=n("%AsyncGenerator%");r&&b&&(e=b(r.prototype))}return v[t]=e,e},Z={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=q,U=Tt,Ft=T.call(Function.call,Array.prototype.concat),xt=T.call(Function.apply,Array.prototype.splice),tt=T.call(Function.call,String.prototype.replace),F=T.call(Function.call,String.prototype.slice),$t=T.call(Function.call,RegExp.prototype.exec),Dt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,kt=/\\(\\)?/g,Mt=function(t){var e=F(t,0,1),i=F(t,-1);if(e==="%"&&i!=="%")throw new I("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&e!=="%")throw new I("invalid intrinsic syntax, expected opening `%`");var r=[];return tt(t,Dt,function(y,o,s,a){r[r.length]=s?tt(a,kt,"$1"):o||y}),r},Gt=function(t,e){var i=t,r;if(U(Z,i)&&(r=Z[i],i="%"+r[0]+"%"),U(v,i)){var y=v[i];if(y===E&&(y=Ut(i)),typeof y>"u"&&!e)throw new w("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:y}}throw new I("intrinsic "+t+" does not exist!")},H=function(t,e){if(typeof t!="string"||t.length===0)throw new w("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new w('"allowMissing" argument must be a boolean');if($t(/^%?[^%]*%?$/,t)===null)throw new I("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=Mt(t),r=i.length>0?i[0]:"",y=Gt("%"+r+"%",e),o=y.name,s=y.value,a=!1,p=y.alias;p&&(r=p[0],xt(i,Ft([0,1],p)));for(var l=1,c=!0;l<i.length;l+=1){var f=i[l],u=F(f,0,1),d=F(f,-1);if((u==='"'||u==="'"||u==="`"||d==='"'||d==="'"||d==="`")&&u!==d)throw new I("property names with quotes must have matching quotes");if((f==="constructor"||!c)&&(a=!0),r+="."+f,o="%"+r+"%",U(v,o))s=v[o];else if(s!=null){if(!(f in s)){if(!e)throw new w("base intrinsic for "+t+" exists, but the property is not available.");return}if(_&&l+1>=i.length){var h=_(s,f);c=!!h,c&&"get"in h&&!("originalValue"in h.get)?s=h.get:s=s[f]}else c=U(s,f),s=s[f];c&&!a&&(v[o]=s)}}return s},yt={exports:{}};(function(n){var t=q,e=H,i=e("%Function.prototype.apply%"),r=e("%Function.prototype.call%"),y=e("%Reflect.apply%",!0)||t.call(r,i),o=e("%Object.getOwnPropertyDescriptor%",!0),s=e("%Object.defineProperty%",!0),a=e("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}n.exports=function(c){var f=y(t,r,arguments);if(o&&s){var u=o(f,"length");u.configurable&&s(f,"length",{value:1+a(0,c.length-(arguments.length-1))})}return f};var p=function(){return y(t,i,arguments)};s?s(n.exports,"apply",{value:p}):n.exports.apply=p})(yt);var Lt=yt.exports,pt=H,ft=Lt,Yt=ft(pt("String.prototype.indexOf")),Wt=function(t,e){var i=pt(t,!!e);return typeof i=="function"&&Yt(t,".prototype.")>-1?ft(i):i},Vt=lt,Kt=function(){return Vt()&&!!Symbol.toStringTag},zt=Kt(),qt=Wt,W=qt("Object.prototype.toString"),x=function(t){return zt&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:W(t)==="[object Arguments]"},ut=function(t){return x(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&W(t)!=="[object Array]"&&W(t.callee)==="[object Function]"},Ht=function(){return x(arguments)}();x.isLegacyArguments=ut;var Be=Ht?x:ut;const Jt={},Xt=Object.freeze(Object.defineProperty({__proto__:null,default:Jt},Symbol.toStringTag,{value:"Module"})),Ne=ht(Xt);var gt=Function.prototype.toString,P=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,V,j;if(typeof P=="function"&&typeof Object.defineProperty=="function")try{V=Object.defineProperty({},"length",{get:function(){throw j}}),j={},P(function(){throw 42},null,V)}catch(n){n!==j&&(P=null)}else P=null;var Qt=/^\s*class\b/,K=function(t){try{var e=gt.call(t);return Qt.test(e)}catch{return!1}},M=function(t){try{return K(t)?!1:(gt.call(t),!0)}catch{return!1}},B=Object.prototype.toString,Zt="[object Object]",te="[object Function]",ee="[object GeneratorFunction]",re="[object HTMLAllCollection]",ne="[object HTML document.all class]",oe="[object HTMLCollection]",ae=typeof Symbol=="function"&&!!Symbol.toStringTag,ie=!(0 in[,]),z=function(){return!1};if(typeof document=="object"){var se=document.all;B.call(se)===B.call(document.all)&&(z=function(t){if((ie||!t)&&(typeof t>"u"||typeof t=="object"))try{var e=B.call(t);return(e===re||e===ne||e===oe||e===Zt)&&t("")==null}catch{}return!1})}var le=P?function(t){if(z(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{P(t,null,V)}catch(e){if(e!==j)return!1}return!K(t)&&M(t)}:function(t){if(z(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(ae)return M(t);if(K(t))return!1;var e=B.call(t);return e!==te&&e!==ee&&!/^\[object HTML/.test(e)?!1:M(t)},ce=le,ye=Object.prototype.toString,dt=Object.prototype.hasOwnProperty,pe=function(t,e,i){for(var r=0,y=t.length;r<y;r++)dt.call(t,r)&&(i==null?e(t[r],r,t):e.call(i,t[r],r,t))},fe=function(t,e,i){for(var r=0,y=t.length;r<y;r++)i==null?e(t.charAt(r),r,t):e.call(i,t.charAt(r),r,t)},ue=function(t,e,i){for(var r in t)dt.call(t,r)&&(i==null?e(t[r],r,t):e.call(i,t[r],r,t))},ge=function(t,e,i){if(!ce(e))throw new TypeError("iterator must be a function");var r;arguments.length>=3&&(r=i),ye.call(t)==="[object Array]"?pe(t,e,r):typeof t=="string"?fe(t,e,r):ue(t,e,r)},Ce=ge,G=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],de=typeof globalThis>"u"?bt:globalThis,Ue=function(){for(var t=[],e=0;e<G.length;e++)typeof de[G[e]]=="function"&&(t[t.length]=G[e]);return t},he=H,N=he("%Object.getOwnPropertyDescriptor%",!0);if(N)try{N([],"length")}catch{N=null}var Fe=N;const{addons:be}=__STORYBOOK_MODULE_PREVIEW_API__,{once:me,logger:Se}=__STORYBOOK_MODULE_CLIENT_LOGGER__,{FORCE_REMOUNT:et,STORY_RENDER_PHASE_CHANGED:Ae,SET_CURRENT_STORY:_e,IGNORED_EXCEPTION:ve}=__STORYBOOK_MODULE_CORE_EVENTS__;var Oe=(n=>(n.DONE="done",n.ERROR="error",n.ACTIVE="active",n.WAITING="waiting",n))(Oe||{}),A={CALL:"storybook/instrumenter/call",SYNC:"storybook/instrumenter/sync",START:"storybook/instrumenter/start",BACK:"storybook/instrumenter/back",GOTO:"storybook/instrumenter/goto",NEXT:"storybook/instrumenter/next",END:"storybook/instrumenter/end"},rt={start:!1,back:!1,goto:!1,next:!1,end:!1},nt=new Error("This function ran after the play function completed. Did you forget to `await` it?"),ot=n=>Object.prototype.toString.call(n)==="[object Object]",Ee=n=>Object.prototype.toString.call(n)==="[object Module]",Pe=n=>{if(!ot(n)&&!Ee(n))return!1;if(n.constructor===void 0)return!0;let t=n.constructor.prototype;return!(!ot(t)||Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")===!1)},we=n=>{try{return new n.constructor}catch{return{}}},L=()=>({renderPhase:void 0,isDebugging:!1,isPlaying:!1,isLocked:!1,cursor:0,calls:[],shadowCalls:[],callRefsByResult:new Map,chainedCallIds:new Set,ancestors:[],playUntil:void 0,resolvers:{},syncTimeout:void 0}),at=(n,t=!1)=>{let e=(t?n.shadowCalls:n.calls).filter(r=>r.retain);if(!e.length)return;let i=new Map(Array.from(n.callRefsByResult.entries()).filter(([,r])=>r.retain));return{cursor:e.length,calls:e,callRefsByResult:i}},Ie=class{constructor(){this.initialized=!1,this.channel=be.getChannel(),this.state=S.window.parent.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__||{};let n=({storyId:o,isPlaying:s=!0,isDebugging:a=!1})=>{let p=this.getState(o);this.setState(o,{...L(),...at(p,a),shadowCalls:a?p.shadowCalls:[],chainedCallIds:a?p.chainedCallIds:new Set,playUntil:a?p.playUntil:void 0,isPlaying:s,isDebugging:a}),this.sync(o)};this.channel.on(et,n),this.channel.on(Ae,({storyId:o,newPhase:s})=>{let{isDebugging:a}=this.getState(o);this.setState(o,{renderPhase:s}),s==="preparing"&&a&&n({storyId:o}),s==="playing"&&n({storyId:o,isDebugging:a}),s==="played"&&this.setState(o,{isLocked:!1,isPlaying:!1,isDebugging:!1}),s==="errored"&&this.setState(o,{isLocked:!1,isPlaying:!1})}),this.channel.on(_e,()=>{this.initialized?this.cleanup():this.initialized=!0});let t=({storyId:o,playUntil:s})=>{this.getState(o).isDebugging||this.setState(o,({calls:p})=>({calls:[],shadowCalls:p.map(l=>({...l,status:"waiting"})),isDebugging:!0}));let a=this.getLog(o);this.setState(o,({shadowCalls:p})=>{var c;if(s||!a.length)return{playUntil:s};let l=p.findIndex(f=>f.id===a[0].callId);return{playUntil:(c=p.slice(0,l).filter(f=>f.interceptable&&!f.ancestors.length).slice(-1)[0])==null?void 0:c.id}}),this.channel.emit(et,{storyId:o,isDebugging:!0})},e=({storyId:o})=>{var p;let s=this.getLog(o).filter(l=>!l.ancestors.length),a=s.reduceRight((l,c,f)=>l>=0||c.status==="waiting"?l:f,-1);t({storyId:o,playUntil:(p=s[a-1])==null?void 0:p.callId})},i=({storyId:o,callId:s})=>{var u;let{calls:a,shadowCalls:p,resolvers:l}=this.getState(o),c=a.find(({id:d})=>d===s),f=p.find(({id:d})=>d===s);if(!c&&f&&Object.values(l).length>0){let d=(u=this.getLog(o).find(h=>h.status==="waiting"))==null?void 0:u.callId;f.id!==d&&this.setState(o,{playUntil:f.id}),Object.values(l).forEach(h=>h())}else t({storyId:o,playUntil:s})},r=({storyId:o})=>{var a;let{resolvers:s}=this.getState(o);if(Object.values(s).length>0)Object.values(s).forEach(p=>p());else{let p=(a=this.getLog(o).find(l=>l.status==="waiting"))==null?void 0:a.callId;p?t({storyId:o,playUntil:p}):y({storyId:o})}},y=({storyId:o})=>{this.setState(o,{playUntil:void 0,isDebugging:!1}),Object.values(this.getState(o).resolvers).forEach(s=>s())};this.channel.on(A.START,t),this.channel.on(A.BACK,e),this.channel.on(A.GOTO,i),this.channel.on(A.NEXT,r),this.channel.on(A.END,y)}getState(n){return this.state[n]||L()}setState(n,t){let e=this.getState(n),i=typeof t=="function"?t(e):t;this.state={...this.state,[n]:{...e,...i}},S.window.parent.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__=this.state}cleanup(){this.state=Object.entries(this.state).reduce((t,[e,i])=>{let r=at(i);return r&&(t[e]=Object.assign(L(),r)),t},{});let n={controlStates:rt,logItems:[]};this.channel.emit(A.SYNC,n),S.window.parent.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__=this.state}getLog(n){let{calls:t,shadowCalls:e}=this.getState(n),i=[...e];t.forEach((y,o)=>{i[o]=y});let r=new Set;return i.reduceRight((y,o)=>(o.args.forEach(s=>{s!=null&&s.__callId__&&r.add(s.__callId__)}),o.path.forEach(s=>{s.__callId__&&r.add(s.__callId__)}),(o.interceptable||o.exception)&&!r.has(o.id)&&(y.unshift({callId:o.id,status:o.status,ancestors:o.ancestors}),r.add(o.id)),y),[])}instrument(n,t){if(!Pe(n))return n;let{mutate:e=!1,path:i=[]}=t;return Object.keys(n).reduce((r,y)=>{let o=n[y];return typeof o!="function"?(r[y]=this.instrument(o,{...t,path:i.concat(y)}),r):typeof o.__originalFn__=="function"?(r[y]=o,r):(r[y]=(...s)=>this.track(y,o,s,t),r[y].__originalFn__=o,Object.defineProperty(r[y],"name",{value:y,writable:!1}),Object.keys(o).length>0&&Object.assign(r[y],this.instrument({...o},{...t,path:i.concat(y)})),r)},e?n:we(n))}track(n,t,e,i){var d,h,m,R;let r=((d=e==null?void 0:e[0])==null?void 0:d.__storyId__)||((R=(m=(h=S.__STORYBOOK_PREVIEW__)==null?void 0:h.selectionStore)==null?void 0:m.selection)==null?void 0:R.storyId),{cursor:y,ancestors:o}=this.getState(r);this.setState(r,{cursor:y+1});let s=`${o.slice(-1)[0]||r} [${y}] ${n}`,{path:a=[],intercept:p=!1,retain:l=!1}=i,c=typeof p=="function"?p(n,a):p,f={id:s,cursor:y,storyId:r,ancestors:o,path:a,method:n,args:e,interceptable:c,retain:l},u=(c&&!o.length?this.intercept:this.invoke).call(this,t,f,i);return this.instrument(u,{...i,mutate:!0,path:[{__callId__:f.id}]})}intercept(n,t,e){let{chainedCallIds:i,isDebugging:r,playUntil:y}=this.getState(t.storyId),o=i.has(t.id);return!r||o||y?(y===t.id&&this.setState(t.storyId,{playUntil:void 0}),this.invoke(n,t,e)):new Promise(s=>{this.setState(t.storyId,({resolvers:a})=>({isLocked:!1,resolvers:{...a,[t.id]:s}}))}).then(()=>(this.setState(t.storyId,s=>{let{[t.id]:a,...p}=s.resolvers;return{isLocked:!0,resolvers:p}}),this.invoke(n,t,e)))}invoke(n,t,e){let{callRefsByResult:i,renderPhase:r}=this.getState(t.storyId),y=a=>{var p,l;if(i.has(a))return i.get(a);if(a instanceof Array)return a.map(y);if(a instanceof Date)return{__date__:{value:a.toISOString()}};if(a instanceof Error){let{name:c,message:f,stack:u}=a;return{__error__:{name:c,message:f,stack:u}}}if(a instanceof RegExp){let{flags:c,source:f}=a;return{__regexp__:{flags:c,source:f}}}if(a instanceof S.window.HTMLElement){let{prefix:c,localName:f,id:u,classList:d,innerText:h}=a,m=Array.from(d);return{__element__:{prefix:c,localName:f,id:u,classNames:m,innerText:h}}}return typeof a=="function"?{__function__:{name:a.name}}:typeof a=="symbol"?{__symbol__:{description:a.description}}:typeof a=="object"&&((p=a==null?void 0:a.constructor)!=null&&p.name)&&((l=a==null?void 0:a.constructor)==null?void 0:l.name)!=="Object"?{__class__:{name:a.constructor.name}}:Object.prototype.toString.call(a)==="[object Object]"?Object.fromEntries(Object.entries(a).map(([c,f])=>[c,y(f)])):a},o={...t,args:t.args.map(y)};t.path.forEach(a=>{a!=null&&a.__callId__&&this.setState(t.storyId,({chainedCallIds:p})=>({chainedCallIds:new Set(Array.from(p).concat(a.__callId__))}))});let s=a=>{if(a instanceof Error){let{name:p,message:l,stack:c,callId:f=t.id}=a,u={name:p,message:l,stack:c,callId:f};if(this.update({...o,status:"error",exception:u}),this.setState(t.storyId,d=>({callRefsByResult:new Map([...Array.from(d.callRefsByResult.entries()),[a,{__callId__:t.id,retain:t.retain}]])})),t.ancestors.length)throw Object.prototype.hasOwnProperty.call(a,"callId")||Object.defineProperty(a,"callId",{value:t.id}),a;if(a!==nt)throw Se.warn(a),ve}throw a};try{if(r==="played"&&!t.retain)throw nt;let a=(e.getArgs?e.getArgs(t,this.getState(t.storyId)):t.args).map(l=>typeof l!="function"||Object.keys(l).length?l:(...c)=>{let{cursor:f,ancestors:u}=this.getState(t.storyId);this.setState(t.storyId,{cursor:0,ancestors:[...u,t.id]});let d=()=>this.setState(t.storyId,{cursor:f,ancestors:u}),h=!1;try{let m=l(...c);return m instanceof Promise?(h=!0,m.finally(d)):m}finally{h||d()}}),p=n(...a);return p&&["object","function","symbol"].includes(typeof p)&&this.setState(t.storyId,l=>({callRefsByResult:new Map([...Array.from(l.callRefsByResult.entries()),[p,{__callId__:t.id,retain:t.retain}]])})),this.update({...o,status:p instanceof Promise?"active":"done"}),p instanceof Promise?p.then(l=>(this.update({...o,status:"done"}),l),s):p}catch(a){return s(a)}}update(n){this.channel.emit(A.CALL,n),this.setState(n.storyId,({calls:t})=>{let e=t.concat(n).reduce((i,r)=>Object.assign(i,{[r.id]:r}),{});return{calls:Object.values(e).sort((i,r)=>i.id.localeCompare(r.id,void 0,{numeric:!0}))}}),this.sync(n.storyId)}sync(n){let t=()=>{var p;let{isLocked:e,isPlaying:i}=this.getState(n),r=this.getLog(n),y=(p=r.filter(({ancestors:l})=>!l.length).find(l=>l.status==="waiting"))==null?void 0:p.callId,o=r.some(l=>l.status==="active");if(e||o||r.length===0){let l={controlStates:rt,logItems:r};this.channel.emit(A.SYNC,l);return}let s=r.some(l=>l.status==="done"||l.status==="error"),a={controlStates:{start:s,back:s,goto:!0,next:i,end:i},logItems:r,pausedAt:y};this.channel.emit(A.SYNC,a)};this.setState(n,({syncTimeout:e})=>(clearTimeout(e),{syncTimeout:setTimeout(t,0)}))}};function xe(n,t={}){var e,i,r,y;try{let o=!1,s=!1;return(i=(e=S.window.location)==null?void 0:e.search)!=null&&i.includes("instrument=true")?o=!0:(y=(r=S.window.location)==null?void 0:r.search)!=null&&y.includes("instrument=false")&&(s=!0),S.window.parent===S.window&&!o||s?n:(S.window.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__||(S.window.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__=new Ie),S.window.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__.instrument(n,t))}catch(o){return me.warn(o),n}}var C={exports:{}};C.exports;var it;function $e(){return it||(it=1,function(n){const t=(l,c)=>(...f)=>`\x1B[${l(...f)+c}m`,e=(l,c)=>(...f)=>{const u=l(...f);return`\x1B[${38+c};5;${u}m`},i=(l,c)=>(...f)=>{const u=l(...f);return`\x1B[${38+c};2;${u[0]};${u[1]};${u[2]}m`},r=l=>l,y=(l,c,f)=>[l,c,f],o=(l,c,f)=>{Object.defineProperty(l,c,{get:()=>{const u=f();return Object.defineProperty(l,c,{value:u,enumerable:!0,configurable:!0}),u},enumerable:!0,configurable:!0})};let s;const a=(l,c,f,u)=>{s===void 0&&(s=mt);const d=u?10:0,h={};for(const[m,R]of Object.entries(s)){const J=m==="ansi16"?"ansi":m;m===c?h[J]=l(f,d):typeof R=="object"&&(h[J]=l(R[c],d))}return h};function p(){const l=new Map,c={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};c.color.gray=c.color.blackBright,c.bgColor.bgGray=c.bgColor.bgBlackBright,c.color.grey=c.color.blackBright,c.bgColor.bgGrey=c.bgColor.bgBlackBright;for(const[f,u]of Object.entries(c)){for(const[d,h]of Object.entries(u))c[d]={open:`\x1B[${h[0]}m`,close:`\x1B[${h[1]}m`},u[d]=c[d],l.set(h[0],h[1]);Object.defineProperty(c,f,{value:u,enumerable:!1})}return Object.defineProperty(c,"codes",{value:l,enumerable:!1}),c.color.close="\x1B[39m",c.bgColor.close="\x1B[49m",o(c.color,"ansi",()=>a(t,"ansi16",r,!1)),o(c.color,"ansi256",()=>a(e,"ansi256",r,!1)),o(c.color,"ansi16m",()=>a(i,"rgb",y,!1)),o(c.bgColor,"ansi",()=>a(t,"ansi16",r,!0)),o(c.bgColor,"ansi256",()=>a(e,"ansi256",r,!0)),o(c.bgColor,"ansi16m",()=>a(i,"rgb",y,!0)),c}Object.defineProperty(n,"exports",{enumerable:!0,get:p})}(C)),C.exports}var Y,st;function De(){return st||(st=1,Y={stdout:!1,stderr:!1}),Y}export{De as a,Ne as b,Ue as c,Wt as d,Lt as e,Ce as f,Fe as g,xe as h,Be as i,H as j,lt as k,Tt as l,At as m,$e as r,Kt as s};
//# sourceMappingURL=browser-29c2730c.js.map
